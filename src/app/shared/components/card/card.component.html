<div
  class="rounded-2xl overflow-hidden p-5 flex flex-col bg-white shadow-md hover:shadow-2xl transition duration-300 ease-in-out group/card relative"
>
  <!-- Product Image & Details -->
  <div class="cursor-pointer" [routerLink]="['/details', product._id]">
    <div class="relative">
      <img
        [src]="product.imageCover"
        [alt]="product.title"
        class="w-full object-cover h-[220px] rounded-xl transition duration-300 ease-in-out group-hover/card:scale-105"
      />
      <i
        (click)="$event.stopPropagation(); toggleWishlist(product)"
        [ngClass]="{
           'fas text-red-500 hover:text-red-700': isInWishlist(product._id),
           'far text-gray-500 hover:text-red-500': !isInWishlist(product._id)
        }"
        class="fa-heart fa-lg absolute top-3 right-3 cursor-pointer hover:text-red-500 transition"
      ></i>
    </div>

    <!-- Category -->
    <p
      class="text-xs font-medium text-[#0aad0a] uppercase tracking-wide mt-3 mb-1"
    >
      {{ product.category.name }}
    </p>

    <!-- Title -->
    <h2
      class="text-lg font-semibold line-clamp-1 text-gray-800 group-hover/card:text-[#0aad0a] transition"
    >
      {{ product.title }}
    </h2>

    <!-- Price & Rating -->
    <div
      class="flex justify-between items-center mt-3 border-t pt-3 text-sm text-gray-700"
    >
      <p class="font-bold text-gray-800">
        {{ product.price | currency : 'GBP' }}
      </p>
      <div class="flex items-center space-x-1">
        <span class="text-yellow-500">â˜…</span>
        <span>{{ product.ratingsAverage }}</span>
      </div>
    </div>
  </div>

  <!-- Add to Cart Button -->
  <button
    (click)="addToCart(product._id)"
    class="bg-[#0aad0a] mt-4 w-full text-white font-medium py-2 px-4 rounded-lg shadow-md hover:bg-green-700 transition duration-300 cursor-pointer"
  >
    Add to Cart
  </button>
</div>
