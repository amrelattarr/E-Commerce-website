<section class="bg-gray-100 p-4">
  <div class="mx-4 sm:mx-12 px-4 sm:px-12 py-6 bg-gray-200 rounded-lg">
    
    <div class="flex flex-col md:flex-row justify-between md:items-start mb-8 gap-6">
      <h2 class="text-2xl md:text-3xl font-semibold">
        Shop Cart :
        <span class="text-orange-700 text-lg">{{ cartDetails.products.length }} Items</span>
      </h2>

      <div class="flex flex-col items-center md:items-end w-full md:w-1/3">
        <div class="w-full">
          <p class="text-xl md:text-2xl font-semibold mb-3 text-center md:text-right">
            Total Cart Price :
            <span class="text-[#0aad0a] text-lg">
              {{ cartDetails.totalCartPrice | currency: 'GBP' }}
            </span>
          </p>
        </div>
      </div>
      
    </div>


    @if (cartDetails.products.length === 0) {
      <div
        class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-md text-center font-semibold mb-12"
      >
        The cart is empty üõí
      </div>
    } @else {
      @for (item of cartDetails.products; track item.product._id) {
        <div
          class="flex flex-col sm:flex-row sm:items-center gap-4 mb-8 bg-white p-4 rounded-lg shadow-md"
        >
          <img
            [src]="item.product.imageCover"
            [alt]="item.product.title"
            class="w-24 h-28 object-cover mx-auto sm:mx-0 rounded"
          />

          <div class="flex-grow text-center sm:text-left">
            <p class="text-gray-900 font-semibold">{{item.product.title}}</p>
            <p class="text-[#0aad0a]">
              Price : {{item.price * item.count | currency : 'GBP'}}
            </p>
            <div
              class="flex justify-center sm:justify-start items-center gap-1 mt-1 text-sm"
            >
              <i
                (click)="removeItem(item.product._id)"
                class="fa-regular fa-trash-can text-red-600 cursor-pointer"
              ></i>
              <span
                (click)="removeItem(item.product._id)"
                class="cursor-pointer"
                >Remove</span
              >
            </div>
          </div>

          <div
            class="flex justify-center sm:justify-end items-center gap-2 text-lg font-semibold"
          >
            <button
              (click)="updateCount(item.product._id ,item.count + 1)"
              class="border border-[#0aad0a] rounded px-2 py-0.5 hover:bg-[#0aad0a] text-[#0aad0a] hover:text-white transition cursor-pointer"
            >
              <i class="fa-solid fa-plus fa-xs"></i>
            </button>
            <span>{{item.count}}</span>
            <button
              (click)="updateCount(item.product._id ,item.count - 1)"
              class="border border-red-600 rounded px-2 py-0.5 hover:bg-red-600 text-red-600 hover:text-white transition cursor-pointer"
            >
              <i class="fa-solid fa-minus fa-xs"></i>
            </button>
          </div>
        </div>
      }

<div class="flex flex-col md:flex-row justify-between items-center gap-4 mt-8">
    <button
    [routerLink]='["/checkout" , cartDetails._id]'
    class="w-full md:w-auto bg-[#0aad0a] hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 cursor-pointer"
  >
    proceed to checkout
  </button>
  <button
    (click)="clearCart()"
    class="w-full md:w-auto bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 cursor-pointer"
  >
    üóëÔ∏è Reset Cart
  </button>
</div>

    }
  </div>
</section>
